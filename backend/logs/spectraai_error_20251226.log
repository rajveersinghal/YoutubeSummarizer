2025-12-26 16:28:56 | ERROR    | spectraai | verify_clerk_token:181 | ❌ JWKS error: Fail to fetch data from the url, err: "HTTP Error 400: Bad Request"
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\jwt\jwks_client.py", line 56, in fetch_data
    with urllib.request.urlopen(
         ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\RAJVEER SINGHAL\AppData\Local\Programs\Python\Python312\Lib\urllib\request.py", line 215, in urlopen
    return opener.open(url, data, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\RAJVEER SINGHAL\AppData\Local\Programs\Python\Python312\Lib\urllib\request.py", line 521, in open
    response = meth(req, response)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\RAJVEER SINGHAL\AppData\Local\Programs\Python\Python312\Lib\urllib\request.py", line 630, in http_response
    response = self.parent.error(
               ^^^^^^^^^^^^^^^^^^
  File "C:\Users\RAJVEER SINGHAL\AppData\Local\Programs\Python\Python312\Lib\urllib\request.py", line 559, in error
    return self._call_chain(*args)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\RAJVEER SINGHAL\AppData\Local\Programs\Python\Python312\Lib\urllib\request.py", line 492, in _call_chain
    result = func(*args)
             ^^^^^^^^^^^
  File "C:\Users\RAJVEER SINGHAL\AppData\Local\Programs\Python\Python312\Lib\urllib\request.py", line 639, in http_error_default
    raise HTTPError(req.full_url, code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 400: Bad Request

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 151, in verify_clerk_token
    else:
          
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\jwt\jwks_client.py", line 115, in get_signing_key_from_jwt
    return self.get_signing_key(header.get("kid"))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\jwt\jwks_client.py", line 97, in get_signing_key
    signing_keys = self.get_signing_keys()
                   ^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\jwt\jwks_client.py", line 84, in get_signing_keys
    jwk_set = self.get_jwk_set(refresh)
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\jwt\jwks_client.py", line 76, in get_jwk_set
    data = self.fetch_data()
           ^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\jwt\jwks_client.py", line 61, in fetch_data
    raise PyJWKClientConnectionError(
jwt.exceptions.PyJWKClientConnectionError: Fail to fetch data from the url, err: "HTTP Error 400: Bad Request"
2025-12-26 16:28:57 | ERROR    | spectraai | verify_clerk_token_api:264 | ❌ Clerk API error: 405 - 
2025-12-26 16:29:57 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:30:57 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:31:57 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:26 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:26 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:26 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:26 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:28 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:28 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:38 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:39 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:39 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:39 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:39 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:39 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:41 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:53 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:53 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:53 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:53 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:55 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:55 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:56 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:32:56 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:07 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:07 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:07 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:07 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:07 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:07 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:09 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:19 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:19 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:19 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:19 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:19 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:19 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:22 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:33 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:33 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:33 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:33 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:33 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:33 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:35 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:45 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:45 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:45 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:45 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:45 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:47 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:47 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:57 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:57 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:57 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:57 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:57 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:57 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:33:58 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:01 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:01 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:03 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:03 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:03 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:03 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:05 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:07 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:07 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:12 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:12 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:12 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:12 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:13 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:18 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:18 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:18 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:18 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:18 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:19 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:19 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:21 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:23 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:24 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:24 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:24 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:24 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:27 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:38 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:38 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:38 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:38 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:39 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:39 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:40 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:50 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:50 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:50 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:50 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:50 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:50 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:52 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:56 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:56 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:56 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:56 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:57 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:57 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:34:58 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:08 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:08 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:08 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:08 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:08 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:08 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:10 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:21 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:21 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:21 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:21 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:21 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:21 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:23 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:34 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:34 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:34 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:34 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:34 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:36 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:36 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:46 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:46 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:46 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:46 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:46 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:46 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:48 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:58 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:58 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:58 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:58 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:58 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:35:58 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:36:00 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:36:10 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:36:10 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:36:10 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:36:10 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:36:10 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:36:10 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:36:13 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:36:21 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:36:22 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:36:22 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:36:22 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:36:22 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:36:22 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:36:23 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:36:25 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:36:25 | ERROR    | spectraai | verify_clerk_token_api:211 | ❌ Clerk API error: 405 - 
2025-12-26 16:36:33 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:36:34 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:36:34 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:36:34 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:36:34 | ERROR    | spectraai | get_user_preferences:272 | ❌ Error getting user preferences: 'Database' object is not an iterator
2025-12-26 16:36:36 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:36:36 | ERROR    | spectraai | get_activities:99 | Error fetching activities: 'Database' object is not an iterator
2025-12-26 16:36:39 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:36:39 | ERROR    | spectraai | get_user_preferences:272 | ❌ Error getting user preferences: 'Database' object is not an iterator
2025-12-26 16:36:58 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:36:59 | ERROR    | spectraai | generate_response:83 | AI generation error: 404 models/gemini-1.5-flash is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
2025-12-26 16:36:59 | ERROR    | spectraai | send_message:149 | Error in chat endpoint: Failed to generate AI response: 404 models/gemini-1.5-flash is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
2025-12-26 16:36:59 | ERROR    | spectraai | request_logger_middleware:227 | ❌ POST /api/chat/ | Status: 500 | Duration: 3.188s
2025-12-26 16:37:27 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:37:27 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:38:29 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:38:29 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:39:27 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:39:27 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:40:27 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:40:27 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:41:27 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:41:27 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:42:28 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:42:28 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:43:58 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:43:58 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:44:57 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:44:57 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:45:57 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:45:57 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:46:57 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:46:57 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:47:57 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:47:57 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:48:57 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:48:57 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:49:57 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:49:57 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:50:57 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:50:57 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:52:59 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:52:59 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:53:57 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:53:57 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:54:57 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: 'Database' object is not an iterator
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 199, in store_user_in_db
    db = next(get_db())
         ^^^^^^^^^^^^^^
TypeError: 'Database' object is not an iterator
2025-12-26 16:54:57 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:55:33 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 16:55:33 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:55:40 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 16:55:40 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 16:55:40 | ERROR    | spectraai | get_activities:99 | Error fetching activities: 'Database' object is not an iterator
2025-12-26 16:55:40 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 16:55:40 | ERROR    | spectraai | get_user_preferences:272 | ❌ Error getting user preferences: 'Database' object is not an iterator
2025-12-26 16:55:42 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 16:55:42 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 16:55:46 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 16:55:46 | ERROR    | spectraai | get_user_preferences:272 | ❌ Error getting user preferences: 'Database' object is not an iterator
2025-12-26 16:55:48 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 16:55:49 | ERROR    | spectraai | generate_response:83 | AI generation error: 404 models/gemini-1.5-flash is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
2025-12-26 16:55:49 | ERROR    | spectraai | send_message:149 | Error in chat endpoint: Failed to generate AI response: 404 models/gemini-1.5-flash is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
2025-12-26 16:55:49 | ERROR    | spectraai | request_logger_middleware:227 | ❌ POST /api/chat/ | Status: 500 | Duration: 4.730s
2025-12-26 16:56:36 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 16:56:36 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 17:01:39 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 17:01:39 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 17:01:39 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 17:01:39 | ERROR    | spectraai | get_user_preferences:272 | ❌ Error getting user preferences: 'Database' object is not an iterator
2025-12-26 17:01:41 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 17:01:41 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 17:01:41 | ERROR    | spectraai | get_activities:99 | Error fetching activities: 'Database' object is not an iterator
2025-12-26 17:01:49 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 17:01:49 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 17:01:49 | ERROR    | spectraai | get_activities:99 | Error fetching activities: 'Database' object is not an iterator
2025-12-26 17:01:49 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 17:01:50 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 17:01:50 | ERROR    | spectraai | get_user_preferences:272 | ❌ Error getting user preferences: 'Database' object is not an iterator
2025-12-26 17:01:51 | ERROR    | spectraai | generate_response:83 | AI generation error: 404 models/gemini-1.5-flash is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
2025-12-26 17:01:51 | ERROR    | spectraai | send_message:149 | Error in chat endpoint: Failed to generate AI response: 404 models/gemini-1.5-flash is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.
2025-12-26 17:01:51 | ERROR    | spectraai | request_logger_middleware:227 | ❌ POST /api/chat/ | Status: 500 | Duration: 6.474s
2025-12-26 17:02:34 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 17:02:34 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 17:03:33 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 17:03:33 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 17:14:57 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 17:14:57 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 17:15:58 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 17:15:58 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 17:16:58 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 17:16:58 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 17:17:57 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 17:17:57 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 17:18:57 | ERROR    | spectraai | store_user_in_db:245 | ❌ Error storing user in DB: '_asyncio.Future' object has no attribute 'get'
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\middleware\auth.py", line 235, in store_user_in_db
    "preferences": result.get("preferences", {
                   ^^^^^^^^^^
AttributeError: '_asyncio.Future' object has no attribute 'get'
2025-12-26 17:18:57 | ERROR    | spectraai | get_user_stats:255 | Error fetching stats: 'Database' object is not an iterator
2025-12-26 17:41:38 | ERROR    | spectraai | get_user_conversations:141 | Error fetching conversations: object list can't be used in 'await' expression
2025-12-26 17:41:44 | ERROR    | spectraai | save_message:72 | Error saving message: object InsertOneResult can't be used in 'await' expression
2025-12-26 17:41:44 | ERROR    | spectraai | send_message:139 | ❌ Error in chat endpoint: object InsertOneResult can't be used in 'await' expression
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\routes\chat.py", line 114, in send_message
    await chat_service.save_message(
  File "R:\2025\Projects\Spectra-AI\backend\services\chat_service.py", line 50, in save_message
    await self.db.messages.insert_one(message)
TypeError: object InsertOneResult can't be used in 'await' expression
2025-12-26 17:41:44 | ERROR    | spectraai | request_logger_middleware:227 | ❌ POST /api/chat/ | Status: 500 | Duration: 5.146s
2025-12-26 19:01:21 | ERROR    | spectraai | get_transcript:130 | ❌ No transcripts available for this video
2025-12-26 19:07:20 | ERROR    | spectraai | save_file:59 | Error saving file: unsupported operand type(s) for /: 'WindowsPath' and 'dict'
2025-12-26 19:07:20 | ERROR    | spectraai | upload_document:161 | Error uploading document: unsupported operand type(s) for /: 'WindowsPath' and 'dict'
2025-12-26 19:07:20 | ERROR    | spectraai | request_logger_middleware:227 | ❌ POST /api/documents/upload | Status: 500 | Duration: 2.525s
2025-12-26 19:15:28 | ERROR    | spectraai | generate_response:110 | ❌ AI generation error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash-exp
Please retry in 26.93979172s. [links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, retry_delay {
  seconds: 26
}
]
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\services\ai_service.py", line 101, in generate_response
    response = chat.send_message(message)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\generativeai\generative_models.py", line 367, in send_message
    response = self.model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\generativeai\generative_models.py", line 248, in generate_content
    response = self._client.generate_content(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 566, in generate_content
    response = rpc(
               ^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash-exp
Please retry in 26.93979172s. [links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, retry_delay {
  seconds: 26
}
]
2025-12-26 19:15:30 | ERROR    | spectraai | generate_response:110 | ❌ AI generation error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash-exp
Please retry in 24.483367118s. [links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, retry_delay {
  seconds: 24
}
]
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\services\ai_service.py", line 101, in generate_response
    response = chat.send_message(message)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\generativeai\generative_models.py", line 367, in send_message
    response = self.model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\generativeai\generative_models.py", line 248, in generate_content
    response = self._client.generate_content(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 566, in generate_content
    response = rpc(
               ^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash-exp
Please retry in 24.483367118s. [links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, retry_delay {
  seconds: 24
}
]
2025-12-26 19:15:33 | ERROR    | spectraai | generate_response:110 | ❌ AI generation error: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash-exp
Please retry in 22.248091899s. [links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, retry_delay {
  seconds: 22
}
]
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\services\ai_service.py", line 101, in generate_response
    response = chat.send_message(message)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\generativeai\generative_models.py", line 367, in send_message
    response = self.model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\generativeai\generative_models.py", line 248, in generate_content
    response = self._client.generate_content(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 566, in generate_content
    response = rpc(
               ^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. To monitor your current usage, head to: https://ai.dev/usage?tab=rate-limit. 
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 0, model: gemini-2.0-flash-exp
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 0, model: gemini-2.0-flash-exp
Please retry in 22.248091899s. [links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerDayPerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_requests"
  quota_id: "GenerateRequestsPerMinutePerProjectPerModel-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.0-flash-exp"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
}
, retry_delay {
  seconds: 22
}
]
2025-12-26 20:55:37 | ERROR    | spectraai | generate_response:110 | ❌ AI generation error: 400 API key expired. Please renew the API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key expired. Please renew the API key."
]
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\services\ai_service.py", line 101, in generate_response
    response = chat.send_message(message)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\generativeai\generative_models.py", line 367, in send_message
    response = self.model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\generativeai\generative_models.py", line 248, in generate_content
    response = self._client.generate_content(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 566, in generate_content
    response = rpc(
               ^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InvalidArgument: 400 API key expired. Please renew the API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key expired. Please renew the API key."
]
2025-12-26 20:55:37 | ERROR    | spectraai | generate_response:110 | ❌ AI generation error: 400 API key expired. Please renew the API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key expired. Please renew the API key."
]
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\services\ai_service.py", line 101, in generate_response
    response = chat.send_message(message)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\generativeai\generative_models.py", line 367, in send_message
    response = self.model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\generativeai\generative_models.py", line 248, in generate_content
    response = self._client.generate_content(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 566, in generate_content
    response = rpc(
               ^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InvalidArgument: 400 API key expired. Please renew the API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key expired. Please renew the API key."
]
2025-12-26 20:55:38 | ERROR    | spectraai | generate_response:110 | ❌ AI generation error: 400 API key expired. Please renew the API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key expired. Please renew the API key."
]
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\services\ai_service.py", line 101, in generate_response
    response = chat.send_message(message)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\generativeai\generative_models.py", line 367, in send_message
    response = self.model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\generativeai\generative_models.py", line 248, in generate_content
    response = self._client.generate_content(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 566, in generate_content
    response = rpc(
               ^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InvalidArgument: 400 API key expired. Please renew the API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key expired. Please renew the API key."
]
2025-12-26 20:57:24 | ERROR    | spectraai | generate_response:110 | ❌ AI generation error: 400 API key expired. Please renew the API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key expired. Please renew the API key."
]
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\services\ai_service.py", line 101, in generate_response
    response = chat.send_message(message)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\generativeai\generative_models.py", line 367, in send_message
    response = self.model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\generativeai\generative_models.py", line 248, in generate_content
    response = self._client.generate_content(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 566, in generate_content
    response = rpc(
               ^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InvalidArgument: 400 API key expired. Please renew the API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key expired. Please renew the API key."
]
2025-12-26 20:57:25 | ERROR    | spectraai | generate_response:110 | ❌ AI generation error: 400 API key expired. Please renew the API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key expired. Please renew the API key."
]
Traceback (most recent call last):
  File "R:\2025\Projects\Spectra-AI\backend\services\ai_service.py", line 101, in generate_response
    response = chat.send_message(message)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\generativeai\generative_models.py", line 367, in send_message
    response = self.model.generate_content(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\generativeai\generative_models.py", line 248, in generate_content
    response = self._client.generate_content(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 566, in generate_content
    response = rpc(
               ^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 294, in retry_wrapped_func
    return retry_target(
           ^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 156, in retry_target
    next_sleep = _retry_error_helper(
                 ^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 147, in retry_target
    result = target()
             ^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "R:\2025\Projects\Spectra-AI\backend\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 77, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InvalidArgument: 400 API key expired. Please renew the API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key expired. Please renew the API key."
]
